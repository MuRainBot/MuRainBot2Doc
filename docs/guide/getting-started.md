# å¿«é€Ÿå¼€å§‹

::: warning è­¦å‘Š
åœ¨é˜…è¯»æœ¬æ–‡æ¡£ä¹‹å‰é»˜è®¤æ‚¨å·²ç»äº†è§£ä»¥ä¸‹å†…å®¹ï¼š

 - [python3 çš„åŸºæœ¬ä½¿ç”¨](https://docs.python.org/zh-cn/3/tutorial/index.html)
 - [pip çš„åŸºæœ¬ä½¿ç”¨](https://www.runoob.com/w3cnote/python-pip-install-usage.html)
 - [onebot11 åè®®çš„åŸºæœ¬æ¦‚å¿µ](https://11.onebot.dev)

:::


å¥½â†‘çš„â†“ ç›¸ä¿¡ä½ å·²ç»äº†è§£äº†ä»¥ä¸Šå†…å®¹ï¼Œé‚£ä¹ˆå¼€å§‹å§ï¼

## 1.å®‰è£…

### 1.1 ä¸‹è½½ä»“åº“
```bash
git clone https://github.com/MuRainBot/MuRainBot2.git
```
::: tip
å¦‚æœä¸æƒ³è¦ä½¿ç”¨ git ä¹Ÿå¯ä»¥ä¸‹è½½ zip åŒ…
[ç‚¹å‡»è¿™é‡Œ](https://codeload.github.com/MuRainBot/MuRainBot2/zip/refs/heads/master)

ä¸‹è½½å®Œæ¯•åï¼Œè§£å‹åˆ°ä»»æ„ä½ç½®å³å¯ã€‚
:::

å®Œæˆåï¼Œè¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½•å³å¯ã€‚

### 1.2 å®‰è£…ä¾èµ–

::: warning è­¦å‘Š
ç”±äºæ¡†æ¶ä½¿ç”¨äº† f-string ç­‰é«˜ç‰ˆæœ¬ python æ‰å¼•å…¥çš„è¯­æ³•ï¼Œè¯·ç¡®ä¿ä½ çš„ python ç‰ˆæœ¬å¤§äºç­‰äº 3.12

è‹¥pythonç‰ˆæœ¬ä¸æ»¡è¶³è¦æ±‚ï¼Œå¯å°è¯•è‡ªè¡Œæœç´¢æ•™ç¨‹ä»¥æ›´æ–° pythonã€‚
:::

### 1.2.1 ä½¿ç”¨venvè™šæ‹Ÿç¯å¢ƒ(å¯é€‰)
ä¸ºäº†é¿å…å¹²æ‰°ç³»ç»Ÿçš„ python ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ venv è™šæ‹Ÿç¯å¢ƒæ¥å®‰è£…ä¾èµ–ã€‚

åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python3 -m venv .venv
```

æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
::: code-group
```bash [linux/macOS]
source .venv/bin/activate
```
```bash [windows]
.venv\Scripts\activate
```
:::

### 1.2.2 å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

::: tip
å¦‚æœä¸‹è½½è¿‡æ…¢ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å›½å†…é•œåƒæº
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```
:::

## 2.é…ç½®

ç›¸ä¿¡ä½ å·²ç»æˆåŠŸå®‰è£…å¹¶ä¸‹è½½äº†é¡¹ç›®æ‰€éœ€çš„ä¾èµ–ï¼Œæ¥ä¸‹æ¥å¼€å§‹é…ç½®

MRB2çš„é…ç½®æ–‡ä»¶ä½äº `config.yml` æ–‡ä»¶å†…

é»˜è®¤é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š
```yaml
# MuCloud Bot Pythoné…ç½®æ–‡ä»¶
account:  # è´¦å·ç›¸å…³
  user_id: 0  # QQè´¦å·ï¼ˆç•™ç©ºåˆ™è‡ªåŠ¨è·å–ï¼‰
  nick_name: ""  # æ˜µç§°ï¼ˆç•™ç©ºåˆ™è‡ªåŠ¨è·å–ï¼‰
  bot_admin: []

api:  # Apiè®¾ç½®
  host: '127.0.0.1'
  port: 5700

server:  # ç›‘å¬æœåŠ¡å™¨è®¾ç½®
  host: '127.0.0.1'
  port: 5701

thread_pool:  # çº¿ç¨‹æ± ç›¸å…³
  max_workers: 10  # çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°

qq_data_cache:  # QQæ•°æ®ç¼“å­˜è®¾ç½®
  enable: true  # æ˜¯å¦å¯ç”¨ç¼“å­˜
  expire_time: 300  # ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
  max_cache_size: 500  # æœ€å¤§ç¼“å­˜æ•°é‡ï¼ˆè®¾ç½®è¿‡å¤§å¯èƒ½ä¼šå¯¼è‡´æŠ¥é”™ï¼‰


debug:  # è°ƒè¯•æ¨¡å¼ï¼Œè‹¥å¯ç”¨æ¡†æ¶çš„æ—¥å¿—ç­‰çº§å°†è¢«è®¾ç½®ä¸ºdebugï¼ŒåŒæ—¶éƒ¨åˆ†å¼‚å¸¸å¤„ç†å°†å…³é—­ï¼Œç”±äºæ— å¼‚å¸¸å¤„ç†ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå¯¼è‡´æ„å¤–ä¸­æ–­è¿è¡Œï¼Œæ‰€ä»¥ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒå¼€å¯
  enable: false  # æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼

auto_restart_onebot:  # åœ¨Onebotå®ç°ç«¯çŠ¶æ€å¼‚å¸¸æ—¶è‡ªåŠ¨é‡å¯Onebotå®ç°ç«¯ï¼ˆéœ€å¼€å¯å¿ƒè·³åŒ…ï¼‰
  enable: true  # æ˜¯å¦å¯ç”¨è‡ªåŠ¨é‡å¯
```

éœ€è¦å°†Apiè®¾ç½®å’Œç›‘å¬æœåŠ¡å™¨è®¾ç½®éƒ½ä¿®æ”¹åˆ°ç©ºä½™çš„ç«¯å£ä¸Šã€‚

å…¶ä½™é…ç½®é¡¹é»˜è®¤é…ç½®ä¸€èˆ¬å°±å¯ä»¥æ»¡è¶³æ™®é€šéœ€æ±‚ï¼Œå¦‚æœä½ æœ‰ç‰¹æ®Šéœ€æ±‚å¯ä»¥æ ¹æ®æ³¨é‡Šè‡ªè¡Œä¿®æ”¹ã€‚

## 3.å®‰è£…/é…ç½®Onebotå®ç°ç«¯

é‚£ä¹ˆï¼Œå¦‚ä½•å®‰è£… Onebot å®ç°ç«¯ï¼Ÿé¦–å…ˆä½ è¦çŸ¥é“å¸‚é¢ä¸Šçš„ Onebot å®ç°ç«¯æœ‰å¾ˆå¤šï¼Œç›®å‰ä¸»æµçš„æœ‰(è¢«åˆ’æ‰æ„å‘³åŸºæœ¬ä¸å¯ç”¨/å·²åœæ­¢ç»´æŠ¤):
- [Lagrange.Onebot](https://github.com/LagrangeDev/Lagrange.Core)
- [LLOneBot](https://github.com/LLOneBot/LLOneBot)
- [NapCat](https://github.com/NapNeko/NapCatQQ)
- [~~OpenShamrock~~](https://github.com/whitechi73/OpenShamrock)
- [~~go-cqhttp~~](https://github.com/Mrs4s/go-cqhttp)

è¿™é‡Œä»¥ Lagrange.Onebot ä½œä¸ºç¤ºä¾‹ï¼š

æ ¹æ® Lagrange.Onebot çš„æ–‡æ¡£ï¼Œä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

éšåéœ€è¦å°† Lagrange.Onebot çš„é…ç½®æ–‡ä»¶( `appsettings.json` )ä¸­çš„ `Implementations` å­—æ®µä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼ˆæ­¤ä¸ºé»˜è®¤é…ç½®ï¼Œè‹¥ä¿®æ”¹äº†ç›‘å¬æœåŠ¡å™¨ç«¯å£ï¼Œè¯·ä¿®æ”¹æ­¤å¤„ç«¯å£ï¼‰:
```json
"Implementations": [
        {
            "Type": "HttpPost",
            "Host": "127.0.0.1",
            "Port": 5701,
            "Suffix": "/",
            "HeartBeatInterval": 5000,
            "AccessToken": ""
          },
          {
            "Type": "Http",
            "Host": "127.0.0.1",
            "Port": 5700,
            "AccessToken": ""
          }
    ]
```

é…ç½®å®Œæˆåï¼Œè¿è¡Œ Lagrange.Onebotï¼Œç™»å½•è´¦å·å³å¯ã€‚

## 4.å¯åŠ¨

::: tip
å¦‚æœä½ ä½¿ç”¨äº† venv è™šæ‹Ÿç¯å¢ƒè¯·å…ˆæ¿€æ´»ç¯å¢ƒã€‚
:::

è¿›å…¥åˆ° MRB2 æ ¹ç›®å½•ä¸‹ã€‚

```bash
python main.py
```

æ²¡é”™ï¼Œå°±è¿™ä¹ˆç®€å•

è‡³æ­¤ï¼Œ MRB2 å·²ç»å®‰è£…å¹¶é…ç½®å®Œæ¯•ï¼Œä½ å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼
â„°ğ“ƒğ’¿â„´ğ“!
